<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Voice Agent — Memory + Realtime (Penn State theme)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ========= Penn State themed Clean & Airy =========
       Primary navy: #041E42 (Penn State Blue)
       Supporting soft blues and neutrals for an airy feel
    */
    * { box-sizing: border-box; }
    html, body { width: 100%; max-width: 100%; overflow-x: hidden; }
    :root{
      --bg:#fafafa;
      --surface:#ffffff;
      --ink:#0b0b0b;
      --muted:#656565;
      --line:#e7e9ee;

      --accent:#041E42;      /* Penn State Blue */
      --accentSoft:#e9eef6;  /* light blue background chip */
      --accentText:#0b3d91;  /* deep link-ish blue for chips */
      --shadow:0 6px 18px rgba(0,0,0,.06);
      --radius:14px;
    }
    body{
      font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      margin:0; color:var(--ink); background:var(--bg);
    }

    /* Header with a subtle navy glow */
    header{
      padding:22px;
      border-bottom:1px solid var(--line);
      background:
        radial-gradient(950px 320px at 12% -40%, rgba(4,30,66,.10) 0%, rgba(4,30,66,0) 60%),
        var(--surface);
      position: sticky; top: 0; z-index: 5;
    }
    h1{ font-size:22px; display:flex; align-items:center; gap:10px; margin:0 0 6px; }
    .sub{ color:var(--muted); font-size:13px; }

    .logo{ width:22px; height:22px; display:inline-block; color:var(--accent); }
    .logo svg{ display:block; width:100%; height:100%; }

    main{
      max-width:1100px; margin:0 auto; padding:18px;
      display:grid; gap:18px; grid-template-columns:minmax(0,1fr) 360px;
    }
    @media (max-width: 900px){ main{ grid-template-columns:1fr; } }

    .panel{ min-width:0; }
    .card{
      background:var(--surface); border:1px solid var(--line);
      border-radius:var(--radius); box-shadow:var(--shadow); padding:16px;
    }
    .row{ margin:10px 0; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    input{
      flex:1; min-width:220px; padding:12px; font-size:16px;
      border-radius:12px; border:1px solid var(--line); background:#fff;
    }
    button{
      padding:12px 16px; border-radius:12px; border:1px solid var(--line);
      background:#fff; font-size:15px; cursor:pointer; transition:.15s ease;
    }
    button:hover{ transform:translateY(-1px); box-shadow:0 6px 14px rgba(0,0,0,.08); }
    button.primary{ background:var(--accent); color:#fff; border-color:var(--accent); }
    button.primary:hover{ box-shadow:0 8px 16px rgba(4,30,66,.22); }
    button.warn{ background:#fff6f6; border-color:#ffd9d9; }

    .pill{
      font-size:12px; padding:4px 10px; border-radius:999px;
      background:var(--accentSoft); color:var(--accentText);
      border:1px solid #d6dfec;
    }
    .k{
      padding:2px 6px; border-radius:8px; background:#f5f7fa; border:1px solid var(--line);
      font-family:ui-monospace, Menlo, Consolas, monospace;
    }

    pre{
      white-space:pre-wrap; background:#fcfcfc; padding:12px; border-radius:12px;
      border:1px solid var(--line); max-height:34vh; overflow:auto; margin:0;
      overflow-wrap:anywhere; word-break:break-word;
    }

    #notesList{ max-height:60vh; overflow:auto; }
    .note{ background:#fff; border:1px solid var(--line); border-radius:12px; padding:12px; margin:10px 0; }
    .note small{ color:#7b7b7b; display:block; margin-top:6px; }
    .notesHead{ display:flex; align-items:center; justify-content:space-between; margin-top:6px; }

    @media (max-width:520px){
      .row{ flex-direction:column; align-items:stretch; }
      input,button{ width:100%; }
    }
  </style>
</head>
<body>
  <header>
    <h1>
      <span class="logo" aria-hidden="true">
        <!-- Simple friendly face circle logo matching the accent -->
        <svg viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
          <path d="M8 13.5c2.2 1.8 5.8 1.8 8 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <circle cx="9" cy="10" r="1" fill="currentColor"/><circle cx="15" cy="10" r="1" fill="currentColor"/>
        </svg>
      </span>
      Voice Agent — Memory + Realtime
    </h1>
    <div class="sub">
      Say <span class="k">remember: …</span>. The model will say a line with <span class="k">SAVE_NOTE: …</span> — we’ll save it as a Note.
      Use <span class="k">Force reply</span> if it goes quiet. On <span class="k">Stop</span>, we save a 3-bullet call snapshot.
    </div>
  </header>

  <main>
    <!-- LEFT: Core controls + Profile memory + Logs -->
    <section class="panel">
      <div class="card">
        <div class="row"><b>Your Memory (saved to server)</b></div>
        <div class="row">
          <small class="mono">User ID: <span id="uid"></span></small>
          <button id="copyUid">Copy</button>
          <span class="pill" id="status">idle</span>
        </div>

        <div class="row"><b>Name:</b><input id="name" placeholder="e.g., Roman" /><button id="saveName">Save</button><span id="saveNameStat"></span></div>
        <div class="row"><b>Kids:</b><input id="kids" placeholder="Comma-separated: Ava, Ben, Chris" /><button id="saveKids">Save</button><span id="saveKidsStat"></span>
